{"version":3,"sources":["webpack:///./src/components/ClientSearch.js","webpack:///./src/templates/ClientSearchTemplate.js"],"names":["ClientSearch","state","isLoading","searchResults","search","isError","indexByTitle","indexByAuthor","termFrequency","removeStopWords","searchQuery","selectedStrategy","selectedSanitizer","rebuildIndex","_this$state","_this","books","props","dataToSearch","JsSearch","tokenizer","indexStrategy","sanitizer","searchIndex","addIndex","addDocuments","setState","searchData","e","queryResult","target","value","handleSubmit","preventDefault","getDerivedStateFromProps","nextProps","prevState","engine","TitleIndex","AuthorIndex","SearchByTerm","searchSanitizer","componentDidMount","_callee","regenerator_default","a","wrap","_context","prev","next","this","stop","render","_this$state2","queryResults","react_default","createElement","style","marginTop","textAlign","padding","margin","onSubmit","htmlFor","paddingRight","id","onChange","placeholder","width","length","borderCollapse","borderRadius","border","fontSize","fontWeight","borderBottom","cursor","map","item","key","isbn","title","author","Component","SearchTemplate","bookData","pageContext","allBooks","options","components_ClientSearch"],"mappings":"mMA+NeA,sJA3NbC,MAAQ,CACNC,WAAW,EACXC,cAAe,GACfC,OAAQ,KACRC,SAAS,EACTC,cAAc,EACdC,eAAe,EACfC,eAAe,EACfC,iBAAiB,EACjBC,YAAW,GACXC,iBAAgB,GAChBC,kBAAiB,MAoBnBC,aAAe,WAAM,IAAAC,EAQfC,EAAKd,MANPU,EAFiBG,EAEjBH,iBACAC,EAHiBE,EAGjBF,kBACAH,EAJiBK,EAIjBL,gBACAD,EALiBM,EAKjBN,cACAF,EANiBQ,EAMjBR,aACAC,EAPiBO,EAOjBP,cAEMS,EAAUD,EAAKE,MAAfD,MAEFE,EAAe,IAAIC,SAAJ,QACjBV,IACFS,EAAaE,UAAY,IAAID,qBAC3BD,EAAaE,YAGG,QAAhBT,IACFO,EAAaG,cAAgB,IAAIF,8BAEf,gBAAhBR,IACFO,EAAaG,cAAgB,IAAIF,0BAEf,iBAAhBR,IACFO,EAAaG,cAAgB,IAAIF,uBAI9BD,EAAaI,UADD,mBAAjBV,EAC8B,IAAIO,yBACJ,IAAIA,qBAG7BD,EAAaK,aADA,IAAlBf,EACgC,IAAIW,mBAAJ,QACA,IAAIA,uBAEhCb,GACFY,EAAaM,SAAb,SAEEjB,GACFW,EAAaM,SAAb,UAEFN,EAAaO,aAAaT,GAC1BD,EAAKW,SAAS,CAAEtB,OAAQc,EAAchB,WAAW,OAEnDyB,WAAa,SAAAC,GAAK,IAEVC,EADad,EAAKd,MAAhBG,OACmBA,OAAOwB,EAAEE,OAAOC,OAC3ChB,EAAKW,SAAS,CAAEhB,YAAakB,EAAEE,OAAOC,MAAO5B,cAAe0B,OAE9DG,aAAe,SAAAJ,GACbA,EAAEK,+BAnEGC,yBAAP,SAAgCC,EAAWC,GACzC,GAAyB,OAArBA,EAAUhC,OAAiB,KACrBiC,EAAWF,EAAXE,OACR,MAAO,CACL/B,aAAc+B,EAAOC,WACrB/B,cAAe8B,EAAOE,YACtB/B,cAAe6B,EAAOG,aACtB5B,kBAAmByB,EAAOI,gBAC1B9B,iBAAkB0B,EAAOhB,eAG7B,OAAO,iCAEHqB,gDAAN,SAAAC,IAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACEC,KAAKrC,eADP,wBAAAkC,EAAAI,SAAAR,EAAAO,gEAwDAE,OAAA,WAAS,IAAAC,EACoDH,KAAKjD,MAAxDC,EADDmD,EACCnD,UAAWG,EADZgD,EACYhD,QAASF,EADrBkD,EACqBlD,cAAeO,EADpC2C,EACoC3C,YACnCM,EAAUkC,KAAKjC,MAAfD,MACFsC,EAA0B,KAAX5C,EAAqBM,EAAQb,EAClD,OAAID,EAEAqD,EAAAV,EAAAW,cAAA,WACED,EAAAV,EAAAW,cAAA,MAAIC,MAAO,CAAEC,UAAS,QAAtB,iCAIFrD,EAEAkD,EAAAV,EAAAW,cAAA,WACED,EAAAV,EAAAW,cAAA,MAAIC,MAAO,CAAEC,UAAS,MAASC,UAAS,WAAxC,eACAJ,EAAAV,EAAAW,cAAA,MACEC,MAAO,CACLC,UAAS,MACTE,QAAO,UACPD,UAAS,WAJb,kCAaJJ,EAAAV,EAAAW,cAAA,WACED,EAAAV,EAAAW,cAAA,OAAKC,MAAO,CAAEI,OAAM,WAClBN,EAAAV,EAAAW,cAAA,QAAMM,SAAUZ,KAAKlB,cACnBuB,EAAAV,EAAAW,cAAA,OAAKC,MAAO,CAAEI,OAAM,WAClBN,EAAAV,EAAAW,cAAA,SAAOO,QAAQ,SAASN,MAAO,CAAEO,aAAY,SAA7C,0BAGAT,EAAAV,EAAAW,cAAA,SACES,GAAG,SACHlC,MAAOrB,EACPwD,SAAUhB,KAAKvB,WACfwC,YAAY,yBACZV,MAAO,CAAEI,OAAM,SAAYO,MAAK,aAItCb,EAAAV,EAAAW,cAAA,8BAEGF,EAAae,OACdd,EAAAV,EAAAW,cAAA,SACEC,MAAO,CACLW,MAAK,OACLE,eAAc,WACdC,aAAY,MACZC,OAAM,sBAGRjB,EAAAV,EAAAW,cAAA,SAAOC,MAAO,CAAEe,OAAM,sBACpBjB,EAAAV,EAAAW,cAAA,UACED,EAAAV,EAAAW,cAAA,MACEC,MAAO,CACLE,UAAS,OACTC,QAAO,MACPa,SAAQ,OACRC,WAAY,IACZC,aAAY,oBACZC,OAAM,YAPV,aAYArB,EAAAV,EAAAW,cAAA,MACEC,MAAO,CACLE,UAAS,OACTC,QAAO,MACPa,SAAQ,OACRC,WAAY,IACZC,aAAY,oBACZC,OAAM,YAPV,cAYArB,EAAAV,EAAAW,cAAA,MACEC,MAAO,CACLE,UAAS,OACTC,QAAO,MACPa,SAAQ,OACRC,WAAY,IACZC,aAAY,oBACZC,OAAM,YAPV,iBAcJrB,EAAAV,EAAAW,cAAA,aAEGF,EAAauB,IAAI,SAAAC,GAChB,OACEvB,EAAAV,EAAAW,cAAA,MAAIuB,IAAG,OAASD,EAAKE,MACnBzB,EAAAV,EAAAW,cAAA,MACEC,MAAO,CACLgB,SAAQ,OACRD,OAAM,sBAGPM,EAAKE,MAERzB,EAAAV,EAAAW,cAAA,MACEC,MAAO,CACLgB,SAAQ,OACRD,OAAM,sBAGPM,EAAKG,OAER1B,EAAAV,EAAAW,cAAA,MACEC,MAAO,CACLgB,SAAQ,OACRD,OAAM,sBAGPM,EAAKI,oBA9MHC,aCgBZC,UAhBQ,SAAAnE,GAAS,IAEtBoE,EADgBpE,EAAhBqE,YACAD,SACAE,EAAsBF,EAAtBE,SAAUC,EAAYH,EAAZG,QAClB,OACEjC,EAAAV,EAAAW,cAAA,WACED,EAAAV,EAAAW,cAAA,MAAIC,MAAO,CAAEC,UAAS,MAASC,UAAS,WAAxC,gDAGAJ,EAAAV,EAAAW,cAAA,WACED,EAAAV,EAAAW,cAACiC,EAAD,CAAczE,MAAOuE,EAAUlD,OAAQmD","file":"component---src-templates-client-search-template-js-1fd364fc34b3504bf2da.js","sourcesContent":["import React, { Component } from \"react\"\nimport * as JsSearch from \"js-search\"\n\nclass ClientSearch extends Component {\n  state = {\n    isLoading: true,\n    searchResults: [],\n    search: null,\n    isError: false,\n    indexByTitle: false,\n    indexByAuthor: false,\n    termFrequency: true,\n    removeStopWords: false,\n    searchQuery: ``,\n    selectedStrategy: ``,\n    selectedSanitizer: ``,\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (prevState.search === null) {\n      const { engine } = nextProps\n      return {\n        indexByTitle: engine.TitleIndex,\n        indexByAuthor: engine.AuthorIndex,\n        termFrequency: engine.SearchByTerm,\n        selectedSanitizer: engine.searchSanitizer,\n        selectedStrategy: engine.indexStrategy,\n      }\n    }\n    return null\n  }\n  async componentDidMount() {\n    this.rebuildIndex()\n  }\n\n  rebuildIndex = () => {\n    const {\n      selectedStrategy,\n      selectedSanitizer,\n      removeStopWords,\n      termFrequency,\n      indexByTitle,\n      indexByAuthor,\n    } = this.state\n    const { books } = this.props\n\n    const dataToSearch = new JsSearch.Search(`isbn`)\n    if (removeStopWords) {\n      dataToSearch.tokenizer = new JsSearch.StopWordsTokenizer(\n        dataToSearch.tokenizer\n      )\n    }\n    if (selectedStrategy === `All`) {\n      dataToSearch.indexStrategy = new JsSearch.AllSubstringsIndexStrategy()\n    }\n    if (selectedStrategy === `Exact match`) {\n      dataToSearch.indexStrategy = new JsSearch.ExactWordIndexStrategy()\n    }\n    if (selectedStrategy === `Prefix match`) {\n      dataToSearch.indexStrategy = new JsSearch.PrefixIndexStrategy()\n    }\n    /* eslint-disable */\n    selectedSanitizer === `Case Sensitive`\n      ? (dataToSearch.sanitizer = new JsSearch.CaseSensitiveSanitizer())\n      : (dataToSearch.sanitizer = new JsSearch.LowerCaseSanitizer())\n    \n    termFrequency === true\n      ? (dataToSearch.searchIndex = new JsSearch.TfIdfSearchIndex(`isbn`))\n      : (dataToSearch.searchIndex = new JsSearch.UnorderedSearchIndex())\n    /* eslint-enable */\n    if (indexByTitle) {\n      dataToSearch.addIndex(`title`)\n    }\n    if (indexByAuthor) {\n      dataToSearch.addIndex(`author`)\n    }\n    dataToSearch.addDocuments(books)\n    this.setState({ search: dataToSearch, isLoading: false })\n  }\n  searchData = e => {\n    const { search } = this.state\n    const queryResult = search.search(e.target.value)\n    this.setState({ searchQuery: e.target.value, searchResults: queryResult })\n  }\n  handleSubmit = e => {\n    e.preventDefault()\n  }\n  render() {\n    const { isLoading, isError, searchResults, searchQuery } = this.state\n    const { books } = this.props\n    const queryResults = searchQuery === `` ? books : searchResults\n    if (isLoading) {\n      return (\n        <div>\n          <h1 style={{ marginTop: `3em` }}>Getting the search all setup</h1>\n        </div>\n      )\n    }\n    if (isError) {\n      return (\n        <div>\n          <h1 style={{ marginTop: `3em`, textAlign: `center` }}>Ohh no!!!!!</h1>\n          <h3\n            style={{\n              marginTop: `2em`,\n              padding: `2em 0em`,\n              textAlign: `center`,\n            }}\n          >\n            Something really bad happened\n          </h3>\n        </div>\n      )\n    }\n    return (\n      <div>\n        <div style={{ margin: `0 auto` }}>\n          <form onSubmit={this.handleSubmit}>\n            <div style={{ margin: `0 auto` }}>\n              <label htmlFor=\"Search\" style={{ paddingRight: `10px` }}>\n                Enter your search here\n              </label>\n              <input\n                id=\"Search\"\n                value={searchQuery}\n                onChange={this.searchData}\n                placeholder=\"Enter your search here\"\n                style={{ margin: `0 auto`, width: `400px` }}\n              />\n            </div>\n          </form>\n          <div>\n            Number of items:\n            {queryResults.length}\n            <table\n              style={{\n                width: `100%`,\n                borderCollapse: `collapse`,\n                borderRadius: `4px`,\n                border: `1px solid #d3d3d3`,\n              }}\n            >\n              <thead style={{ border: `1px solid #808080` }}>\n                <tr>\n                  <th\n                    style={{\n                      textAlign: `left`,\n                      padding: `5px`,\n                      fontSize: `14px`,\n                      fontWeight: 600,\n                      borderBottom: `2px solid #d3d3d3`,\n                      cursor: `pointer`,\n                    }}\n                  >\n                    Tire index\n                  </th>\n                  <th\n                    style={{\n                      textAlign: `left`,\n                      padding: `5px`,\n                      fontSize: `14px`,\n                      fontWeight: 600,\n                      borderBottom: `2px solid #d3d3d3`,\n                      cursor: `pointer`,\n                    }}\n                  >\n                    Tire description\n                  </th>\n                  <th\n                    style={{\n                      textAlign: `left`,\n                      padding: `5px`,\n                      fontSize: `14px`,\n                      fontWeight: 600,\n                      borderBottom: `2px solid #d3d3d3`,\n                      cursor: `pointer`,\n                    }}\n                  >\n                    Tire ratio\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                {/* eslint-disable */}\n                {queryResults.map(item => {\n                  return (\n                    <tr key={`row_${item.isbn}`}>\n                      <td\n                        style={{\n                          fontSize: `14px`,\n                          border: `1px solid #d3d3d3`,\n                        }}\n                      >\n                        {item.isbn}\n                      </td>\n                      <td\n                        style={{\n                          fontSize: `14px`,\n                          border: `1px solid #d3d3d3`,\n                        }}\n                      >\n                        {item.title}\n                      </td>\n                      <td\n                        style={{\n                          fontSize: `14px`,\n                          border: `1px solid #d3d3d3`,\n                        }}\n                      >\n                        {item.author}\n                      </td>\n                    </tr>\n                  )\n                })}\n                {/* eslint-enable */}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\nexport default ClientSearch\n","import React from \"react\"\nimport ClientSearch from \"../components/ClientSearch\"\n\nconst SearchTemplate = props => {\n  const { pageContext } = props\n  const { bookData } = pageContext\n  const { allBooks, options } = bookData\n  return (\n    <div>\n      <h1 style={{ marginTop: `3em`, textAlign: `center` }}>\n        Search data using JS Search using Gatsby Api\n      </h1>\n      <div>\n        <ClientSearch books={allBooks} engine={options} />\n      </div>\n    </div>\n  )\n}\n\nexport default SearchTemplate\n"],"sourceRoot":""}